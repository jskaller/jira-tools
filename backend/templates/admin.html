{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3">Admin Settings</h1>
<form id="admin-form" class="vstack gap-3" autocomplete="off" novalidate>
  <input type="text" name="username" autocomplete="username" style="position:absolute;left:-9999px;top:-9999px;width:0;height:0;border:0;padding:0;">
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Jira Base URL</label>
      <input class="form-control" name="jira_base_url" autocomplete="url" placeholder="https://your-domain.atlassian.net">
    </div>
    <div class="col-md-6">
      <label class="form-label">Jira Email</label>
      <input class="form-control" name="jira_email" autocomplete="email">
    </div>
    <div class="col-md-6">
      <label class="form-label">Jira API Token</label>
      <input class="form-control" name="jira_token" type="password" autocomplete="new-password" placeholder="••••••">
      <small class="text-muted">Stored encrypted at rest.</small>
    </div>
    <div class="col-md-6">
      <label class="form-label">Default JQL</label>
      <input class="form-control" name="jql_default" placeholder="order by updated desc">
    </div>
  </div>
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">BH Start (hour)</label>
      <input class="form-control" name="bh_start" type="number" value="9">
    </div>
    <div class="col-md-3">
      <label class="form-label">BH End (hour)</label>
      <input class="form-control" name="bh_end" type="number" value="17">
    </div>
    <div class="col-md-3">
      <label class="form-label">Max Issues</label>
      <input class="form-control" name="max_issues" type="number" value="25000">
    </div>
    <div class="col-md-3">
      <label class="form-label">Updated (days)</label>
      <input class="form-control" name="updated_days_limit" type="number" value="180">
    </div>
  </div>
  <div class="form-check form-switch">
    <input class="form-check-input" type="checkbox" role="switch" id="use_real_jira">
    <label class="form-check-label" for="use_real_jira">Use Real Jira (off = Mock)</label>
  </div>
  <div class="d-flex gap-2">
    <button class="btn btn-primary" type="submit">Save</button>
    <button class="btn btn-outline-secondary" id="test-conn" type="button">Test connection</button>
  </div>
  <div id="admin-msg" class="mt-2"></div>
</form>
{% endblock %}
{% block scripts %}
  <script src="/static/js/admin.js?v=4" defer></script>
{% endblock %}

<script src="/static/js/admin.js?v=1" defer></script>
